@import './styles/editor-font-sizes.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 208 42% 100%;
    --foreground: 208 66% 1%;
    --muted: 328 21% 87%;
    --muted-foreground: 328 7% 40%;
    --popover: 208 42% 100%;
    --popover-foreground: 208 66% 1%;
    --card: 208 42% 100%;
    --card-foreground: 208 66% 1%;
    --border: 208 9% 94%;
    --input: 208 9% 94%;
    --primary: 208 9% 17%;
    --primary-foreground: 208 9% 77%;
    --secondary: 328 9% 17%;
    --secondary-foreground: 328 9% 77%;
    --accent: 88 9% 17%;
    --accent-foreground: 88 9% 77%;
    --destructive: 21 89% 28%;
    --destructive-foreground: 21 89% 88%;
    --ring: 208 9% 17%;
    --chart-1: 208 9% 17%;
    --chart-2: 328 9% 17%;
    --chart-3: 88 9% 17%;
    --chart-4: 328 9% 20%;
    --chart-5: 208 12% 17%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 208 33% 3%;
    --foreground: 208 39% 98%;
    --muted: 328 21% 13%;
    --muted-foreground: 328 7% 60%;
    --popover: 208 33% 3%;
    --popover-foreground: 208 39% 98%;
    --card: 208 33% 3%;
    --card-foreground: 208 39% 98%;
    --border: 208 9% 15%;
    --input: 208 9% 15%;
    --primary: 208 9% 17%;
    --primary-foreground: 208 9% 77%;
    --secondary: 328 9% 17%;
    --secondary-foreground: 328 9% 77%;
    --accent: 88 9% 17%;
    --accent-foreground: 88 9% 77%;
    --destructive: 21 89% 51%;
    --destructive-foreground: 0 0% 0%;
    --ring: 208 9% 17%;
    --chart-1: 208 9% 17%;
    --chart-2: 328 9% 17%;
    --chart-3: 88 9% 17%;
    --chart-4: 328 9% 20%;
    --chart-5: 208 12% 17%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
}



@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}
/* Font size presets */
.font-size-xs {
  --fs-h1: 1.5rem; /* 24px */
  --fs-h2: 1.25rem; /* 20px */
  --fs-body: 0.75rem; /* 12px */
}
.font-size-sm {
  --fs-h1: 1.75rem; /* 28px */
  --fs-h2: 1.5rem; /* 24px */
  --fs-body: 0.875rem; /* 14px */
}
.font-size-md {
  --fs-h1: 2rem; /* 32px */
  --fs-h2: 1.75rem; /* 28px */
  --fs-body: 1rem; /* 16px */
}
.font-size-lg {
  --fs-h1: 2.25rem; /* 36px */
  --fs-h2: 2rem; /* 32px */
  --fs-body: 1.125rem; /* 18px */
}
.font-size-zen {
  --fs-h1: 2.75rem; /* 44px */
  --fs-h2: 2.375rem; /* 38px */
  --fs-body: 1.375rem; /* 22px */
}

:where([class*='font-size-']) h1 {
  font-size: var(--fs-h1);
}
:where([class*='font-size-']) h2 {
  font-size: var(--fs-h2);
}
:where([class*='font-size-']) p,
:where([class*='font-size-']) li,
:where([class*='font-size-']) blockquote {
  font-size: var(--fs-body);
  line-height: 1.55;
}

.font-size-zen .plate-editor {
  max-width: 65ch;
  margin-inline: auto;
}

/* Make editor cursor white and extra wide */
[data-slate-editor] {
  caret-color: #ffffff !important; /* White cursor */
}

[data-slate-editor]:focus {
  caret-color: #ffffff !important; /* White cursor */
}

/* Plate-specific cursor styling - white and thick */
.plate-editor [data-slate-editor] {
  caret-color: #ffffff !important; /* White cursor */
}

.plate-editor [data-slate-editor]:focus {
  caret-color: #ffffff !important;
}

/* Also target specific Plate editor elements */
.plate-content [data-slate-editor],
.plate-content [data-slate-editor] * {
  caret-color: #ffffff !important;
}

/* Ensure cursor is visible in paragraphs and other text elements */
.plate-editor p[data-slate-node],
.plate-editor div[data-slate-node],
.plate-editor h1[data-slate-node],
.plate-editor h2[data-slate-node],
.plate-editor h3[data-slate-node] {
  caret-color: #ffffff !important;
}

/* Make cursor much thicker using multiple techniques */
.plate-editor [contenteditable="true"] {
  caret-color: #ffffff !important;
  /* Add strong text shadow to make cursor appear much wider */
  text-shadow: 
    1px 0 0 #ffffff, 
    -1px 0 0 #ffffff,
    2px 0 0 #ffffff, 
    -2px 0 0 #ffffff,
    0.5px 0 0 #ffffff,
    -0.5px 0 0 #ffffff;
}

.plate-editor [contenteditable="true"]:focus {
  caret-color: #ffffff !important;
}

/* Target all possible editor text containers */
.plate-editor [contenteditable],
.plate-editor [data-slate-string],
.plate-editor span[data-slate-leaf] {
  caret-color: #ffffff !important;
}

/* Additional approach for wider cursor using pseudo-element */
.plate-editor [contenteditable="true"]::before {
  content: '';
  position: absolute;
  width: 3px;
  height: 1.2em;
  background-color: #ffffff;
  pointer-events: none;
  z-index: 1;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* Zen Mode Portal Styles */
.zen-mode-portal {
  /* Ensure portal is above everything else */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999999;
  pointer-events: none; /* Allow clicks to pass through to children */
}

.zen-mode-portal > * {
  pointer-events: auto; /* Re-enable pointer events for content */
}

/* Zen Mode Container base styles */
.zen-mode-container {
  /* Ensure it covers everything */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 999999 !important;
  
  /* Background and styling */
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
  
  /* Handle overflow properly */
  overflow: auto;
  
  /* Smooth transitions */
  transition: all 0.3s ease-in-out;
  
  /* Ensure proper rendering */
  isolation: isolate;
  
  /* Ensure content is interactive */
  pointer-events: auto !important;
}

/* Ensure all content inside zen mode is interactive */
.zen-mode-container * {
  pointer-events: auto !important;
}

/* Ensure editor is clickable and focusable in zen mode */
.zen-mode-container .editor,
.zen-mode-container [data-slate-editor],
.zen-mode-container [contenteditable="true"] {
  pointer-events: auto !important;
  user-select: text !important;
  -webkit-user-select: text !important;
  cursor: text !important;
}

/* Zen mode editor centering and styling */
.zen-mode-container .editor {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  padding: 3rem 2rem; /* More vertical padding for balance */
}

/* Animate editor when entering zen mode */
.zen-mode-container .plate-editor {
  animation: zen-fade-in 0.5s ease-in-out;
}

@keyframes zen-fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Better readability in zen mode */
.zen-mode-container .plate-editor p,
.zen-mode-container .plate-editor [data-slate-node] {
  line-height: 1.8;
}

/* Ensure proper text width in zen mode */
.zen-mode-container .plate-editor {
  max-width: 100ch !important; /* Enforce character-based width */
  margin: 0 auto;
  padding: 0 2rem;
}

/* Optional: Add a subtle shadow for depth in zen mode */
.zen-mode-container .plate-editor {
  filter: drop-shadow(0 0 40px rgba(0, 0, 0, 0.1));
}

/* Fullscreen API specific styles */
.zen-mode-container:fullscreen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* Webkit fullscreen */
.zen-mode-container:-webkit-full-screen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* Firefox fullscreen */
.zen-mode-container:-moz-full-screen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* MS fullscreen */
.zen-mode-container:-ms-fullscreen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* Prevent scrollbar issues in zen mode */
body:has(.zen-mode-portal) {
  overflow: hidden !important;
  height: 100vh !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Hide scrollbars everywhere when zen mode is active */
.zen-mode-portal ~ * {
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

.zen-mode-portal ~ *::-webkit-scrollbar {
  display: none !important; /* Chrome, Safari and Opera */
}

/* Restore body overflow when zen mode is not active */
body:not(:has(.zen-mode-portal)) {
  overflow: auto;
}

