/*
 * Zen Mode Styles
 * 
 * All CSS related to zen mode functionality including:
 * - Portal styles
 * - Container positioning
 * - Scrollbar customization
 * - Fullscreen behavior
 * - Editor styling in zen mode
 */

/* Zen mode scrollbars - more minimal */
.zen-mode-container::-webkit-scrollbar {
  width: 6px;
}

.zen-mode-container::-webkit-scrollbar-track {
  background: hsl(var(--background));
}

.zen-mode-container::-webkit-scrollbar-thumb {
  background: hsl(var(--muted-foreground) / 0.2);
  border-radius: 3px;
  border: none;
}

.zen-mode-container::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground) / 0.4);
}

/* Zen Mode Portal Styles */
.zen-mode-portal {
  /* Ensure portal is above everything else */
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  pointer-events: none; /* Allow clicking through the portal itself */
}

.zen-mode-portal > * {
  pointer-events: auto; /* Re-enable pointer events for content */
}

/* Zen Mode Container base styles */
.zen-mode-container {
  /* Ensure it covers everything */
  position: fixed !important;
  top: 0 !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  z-index: 9999 !important;
  
  /* Background and theming */
  background: hsl(var(--background)) !important;
  color: hsl(var(--foreground)) !important;
  
  /* Reset any inherited styles */
  margin: 0 !important;
  padding: 0 !important;
  border: none !important;
  box-shadow: none !important;
  
  /* Ensure scrolling works */
  overflow: auto !important;
  
  /* Smooth transitions */
  transition: opacity 0.3s ease-in-out;
}

/* Ensure all content inside zen mode is interactive */
.zen-mode-container * {
  pointer-events: auto !important;
}

/* Ensure editor is clickable and focusable in zen mode */
.zen-mode-container .editor,
.zen-mode-container .tiptap-editor,
.zen-mode-container .ProseMirror,
.zen-mode-container [contenteditable="true"] {
  pointer-events: auto !important;
  user-select: text !important;
  -webkit-user-select: text !important;
  cursor: text !important;
}

/* Zen mode editor centering and styling */
.zen-mode-container .editor {
  display: flex;
  align-items: flex-start; /* Align to top instead of center */
  justify-content: center;
  min-height: 100vh;
  padding: 0; /* Remove container padding, handle in editor itself */
}

/* Animate editor when entering zen mode */
.zen-mode-container .tiptap-editor {
  animation: zen-fade-in 0.5s ease-in-out;
}

@keyframes zen-fade-in {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Better readability in zen mode */
.zen-mode-container .tiptap-editor p,
.zen-mode-container .ProseMirror p {
  line-height: 1.8;
}

/* Optional: Add a subtle shadow for depth in zen mode */
.zen-mode-container .tiptap-editor {
  filter: drop-shadow(0 0 40px rgba(0, 0, 0, 0.1));
}

/* Fullscreen API specific styles */
.zen-mode-container:fullscreen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* Webkit fullscreen */
.zen-mode-container:-webkit-full-screen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* Firefox fullscreen */
.zen-mode-container:-moz-full-screen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* MS fullscreen */
.zen-mode-container:-ms-fullscreen {
  background: hsl(var(--background));
  color: hsl(var(--foreground));
  padding: 0;
  margin: 0;
  width: 100vw;
  height: 100vh;
  overflow: auto;
}

/* Prevent scrollbar issues in zen mode */
body:has(.zen-mode-portal) {
  overflow: hidden !important;
  height: 100vh !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Hide scrollbars everywhere when zen mode is active */
.zen-mode-portal ~ * {
  scrollbar-width: none !important; /* Firefox */
  -ms-overflow-style: none !important; /* IE and Edge */
}

.zen-mode-portal ~ *::-webkit-scrollbar {
  display: none !important; /* Chrome, Safari and Opera */
}

/* Restore body overflow when zen mode is not active */
body:not(:has(.zen-mode-portal)) {
  overflow: auto;
}

/* Fix z-index for sheet components when inside zen mode portal */
.zen-mode-portal [data-radix-dialog-overlay] {
  z-index: 10000 !important;
}

.zen-mode-portal [data-radix-dialog-content] {
  z-index: 10001 !important;
}

/* Ensure sheet components are properly positioned within zen mode */
.zen-mode-container [data-radix-dialog-overlay] {
  z-index: 10000 !important;
}

.zen-mode-container [data-radix-dialog-content] {
  z-index: 10001 !important;
}

/* Ensure sheet trigger buttons are clickable in zen mode */
.zen-mode-container [data-radix-dialog-trigger] {
  pointer-events: auto !important;
  z-index: 10002 !important;
  position: relative;
}

/* Ensure all sheet-related elements are interactive in zen mode */
.zen-mode-container [data-state] {
  pointer-events: auto !important;
}